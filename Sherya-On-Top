local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library", true))()
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterPack = game:GetService("StarterPack")
local player = Players.LocalPlayer

local window = library:AddWindow("Sherya Script", {
    main_color = Color3.fromRGB(255, 92, 153),
    min_size = Vector2.new(400, 300),
    toggle_key = Enum.KeyCode.RightControl,
    can_resize = true,
})

local killerTab = window:AddTab("Killer")

-- 🔪 AutoKill Global
killerTab:AddSwitch("AutoKill Global", function(state)
    getgenv().AutoKillGlobal = state

    if state then
        print("☠️ AutoKill Global ACTIVADO")

        local function getHand()
            local char = player.Character or player.CharacterAdded:Wait()
            return char:FindFirstChild("RightHand") or char:FindFirstChild("Right Arm")
        end

        local hand
        player.CharacterAdded:Connect(function()
            task.wait(1)
            hand = getHand()
        end)

        hand = getHand()

        task.spawn(function()
            while getgenv().AutoKillGlobal do
                if not hand or not hand:IsDescendantOf(workspace) then
                    hand = getHand()
                end
                if hand and hand:IsDescendantOf(workspace) then
                    for _, other in pairs(Players:GetPlayers()) do
                        if other ~= player and other.Character then
                            local targetPart = other.Character:FindFirstChild("HumanoidRootPart")
                            if targetPart and targetPart:IsDescendantOf(workspace) then
                                pcall(function()
                                    firetouchinterest(hand, targetPart, 0)
                                    task.wait(0.05)
                                    firetouchinterest(hand, targetPart, 1)
                                end)
                                task.wait(0.05)
                            end
                        end
                    end
                else
                    task.wait(0.5)
                end
                task.wait(0.1)
            end
            print("🛑 AutoKill Global DESACTIVADO")
        end)
    else
        print("🛑 AutoKill Global DESACTIVADO")
    end
end)

-- 🍹 Auto Tropical Shake
killerTab:AddSwitch("Auto Shake", function(state)
    if state then
        task.spawn(function()
            while true do
                local shake = player.Backpack:FindFirstChild("Tropical Shake")
                if not shake then
                    warn("✅ Ya no quedan Tropical Shakes en el inventario.")
                    break
                end

                warn("🕹 Encontrada Tropical Shakes:", shake, "- equipando...")
                shake.Parent = player.Character
                RunService.Heartbeat:Wait()

                if shake.Activate then
                    shake:Activate()
                    warn("🍹 Activada Tropical Shakes:", shake)
                elseif mouse1click then
                    mouse1click()
                    warn("🍹 mouse1click() sobre Tropical Shakes")
                else
                    warn("⚠️ No se pudo activar Tropical Shakes")
                end

                task.wait(0.1)
            end
        end)
    end
end)

-- 🥚 Auto Protein Egg
killerTab:AddSwitch("Auto Protein Egg", function(state)
    _G.AutoProteinEgg = state
    print("Auto Protein Egg " .. (_G.AutoProteinEgg and "ACTIVADO ✅" or "DESACTIVADO ❌"))

    local character = player.Character or player.CharacterAdded:Wait()
    local toolName = "Protein Egg"

    local function restoreVisibility(tool)
        for _, part in ipairs(tool:GetDescendants()) do
            if part:IsA("BasePart") then
                part.Transparency = 0
                pcall(function() part.LocalTransparencyModifier = 0 end)
            end
        end
    end

    local function findTool()
        local tool = player.Backpack:FindFirstChild(toolName)
        if tool then return tool end
        tool = StarterPack:FindFirstChild(toolName)
        if tool then return tool end
        return ReplicatedStorage:FindFirstChild(toolName)
    end

    local function forceEquip(tool)
        if not (character and character:FindFirstChild("Humanoid")) then return end
        local success, err = pcall(function()
            character.Humanoid:EquipTool(tool)
        end)
        task.wait(0.1)

        if not character:FindFirstChild(toolName) then
            tool.Parent = character
            task.wait(0.1)
        end

        local equipped = character:FindFirstChild(toolName)
        if equipped then restoreVisibility(equipped) end
    end

    local function equipIfNeeded()
        if not _G.AutoProteinEgg or not character then return end
        local equipped = character:FindFirstChild(toolName)
        local needEquip = not equipped or table.find(equipped:GetDescendants(), function(p)
            return p:IsA("BasePart") and p.Transparency > 0
        end)

        if needEquip then
            local tool = findTool()
            if tool then
                if tool.Parent ~= player.Backpack then
                    tool = tool:Clone()
                    tool.Parent = player.Backpack
                end
                forceEquip(tool)
            end
        end
    end

    player.CharacterAdded:Connect(function(char)
        character = char
        task.wait(1)
        equipIfNeeded()
    end)

    player.Backpack.ChildAdded:Connect(function(child)
        if _G.AutoProteinEgg and child.Name == toolName then
            task.wait(0.2)
            equipIfNeeded()
        end
    end)

    task.spawn(function()
        while _G.AutoProteinEgg do
            equipIfNeeded()
            task.wait(0.5)
        end
        print("Auto Protein Egg DESACTIVADO")
    end)
end)
