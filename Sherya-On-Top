local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library"))()
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

getgenv().AutoKillTargets = getgenv().AutoKillTargets or {}
getgenv().AutoKillEnabled = true

-- Crear ventana
local window = library:AddWindow("Auto Kill V2 - Elerium", {
    main_color = Color3.fromRGB(200, 0, 0),
    min_size = Vector2.new(500, 400),
    can_resize = true
})

-- ================= MAIN TAB =================
local mainTab = window:AddTab("Main")

mainTab:AddButton("Activar pegar muerto", function()
    local urls = {
        "https://raw.githubusercontent.com/SadOz8/Stuffs/refs/heads/main/Crack",
        "https://raw.githubusercontent.com/SadOz8/Stuffs/refs/heads/main/Crack2",
        "https://raw.githubusercontent.com/SadOz8/Stuffs/refs/heads/main/Crack3",
        "https://raw.githubusercontent.com/SadOz8/Stuffs/refs/heads/main/Crack4",
        "https://raw.githubusercontent.com/SadOz8/Stuffs/refs/heads/main/Crack5",
        "https://raw.githubusercontent.com/SadOz8/Stuffs/refs/heads/main/Crack6"
    }
    for _, url in ipairs(urls) do
        local success, response = pcall(function()
            return game:HttpGet(url)
        end)
        if success and response then
            pcall(loadstring(response))
        else
            warn("Error cargando script: " .. url)
        end
    end
end)

mainTab:AddButton("Auto Kill a todos", function()
    local url = "https://raw.githubusercontent.com/SadOz8/Stuffs-2/refs/heads/main/Crack7"
    local success, response = pcall(function()
        return game:HttpGet(url)
    end)
    if success and response then
        loadstring(response)()
    else
        warn("Error cargando script Auto Kill a todos")
    end
end)

-- ================= TARGETS TAB =================
local targetsTab = window:AddTab("Targets")

local function updateTargets()
    targetsTab:ClearControls()
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer then
            targetsTab:AddSwitch(plr.Name, function(state)
                if state then
                    getgenv().AutoKillTargets[plr.Name] = true
                else
                    getgenv().AutoKillTargets[plr.Name] = nil
                end
            end, getgenv().AutoKillTargets[plr.Name] or false)
        end
    end
end

Players.PlayerAdded:Connect(updateTargets)
Players.PlayerRemoving:Connect(updateTargets)
updateTargets()

-- ================= SPECTATE TAB =================
local spectateTab = window:AddTab("Spectate")

local playerList = {}
for _, plr in ipairs(Players:GetPlayers()) do
    if plr ~= LocalPlayer then
        table.insert(playerList, plr.Name)
    end
end

Players.PlayerAdded:Connect(function(plr)
    if plr ~= LocalPlayer then
        table.insert(playerList, plr.Name)
    end
end)

Players.PlayerRemoving:Connect(function(plr)
    for i, v in ipairs(playerList) do
        if v == plr.Name then
            table.remove(playerList, i)
            break
        end
    end
end)

local currentlySpectating = nil

spectateTab:AddDropdown("Seleccionar jugador", playerList, function(selected)
    local target = Players:FindFirstChild(selected)
    if target then
        currentlySpectating = target
    end
end)

spectateTab:AddButton("Volver a m√≠", function()
    currentlySpectating = nil
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        Camera.CameraSubject = LocalPlayer.Character.Humanoid
    end
end)

RunService.RenderStepped:Connect(function()
    if currentlySpectating and currentlySpectating.Character then
        local hum = currentlySpectating.Character:FindFirstChild("Humanoid")
        if hum then
            Camera.CameraSubject = hum
        end
    end
end)

-- ================= AUTO KILL LOOP =================
local function getHand()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    return char:FindFirstChild("RightHand") or char:FindFirstChild("Right Arm")
end

local function attackSelectedPlayers()
    local hand = getHand()
    if not hand or not hand:IsDescendantOf(workspace) then return end
    for _, target in pairs(Players:GetPlayers()) do
        if getgenv().AutoKillTargets[target.Name] and target.Character then
            local root = target.Character:FindFirstChild("HumanoidRootPart")
            if root and root:IsDescendantOf(workspace) then
                for _ = 1, 2 do
                    firetouchinterest(hand, root, 0)
                    task.wait(0.01)
                    firetouchinterest(hand, root, 1)
                end
            end
        end
    end
end

task.spawn(function()
    while getgenv().AutoKillEnabled do
        pcall(attackSelectedPlayers)
        task.wait(0.08)
    end
end)
