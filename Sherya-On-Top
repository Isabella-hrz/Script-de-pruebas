local Players = game:GetService("Players")
local player = Players.LocalPlayer

local libraryURL = "https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library"

local window -- Aquí guardamos la ventana creada

-- Función para crear la ventana y el UI completo
local function createUI()
    if window then
        -- Si ya existe, intentamos destruir para recrear
        if window.ScreenGui and window.ScreenGui.Parent then
            window.ScreenGui:Destroy()
        end
        window = nil
    end

    local library = loadstring(game:HttpGet(libraryURL))()

    window = library:AddWindow("Sherya Script", {
        main_color = Color3.fromRGB(200, 0, 255),
        min_size = Vector2.new(660, 660),
        can_resize = false,
    })

    local maintab = window:AddTab("Main")
    local autobrawlFolder = maintab:AddFolder("Auto Brawls")

    getgenv().autoBrawl = false
    getgenv().autoWinBrawl = false

    -- Ejemplo básico funciones
    local function autoJoinExample()
        while getgenv().autoBrawl do
            print("Auto Join activo")
            task.wait(1)
        end
    end

    local function autoWinExample()
        while getgenv().autoWinBrawl do
            print("Auto Win activo")
            task.wait(1)
        end
    end

    autobrawlFolder:AddToggle("Auto Join Brawl", {flag = "auto_brawl"}, function(state)
        getgenv().autoBrawl = state
        if state then
            task.spawn(autoJoinExample)
        end
    end)

    autobrawlFolder:AddToggle("Auto Win Brawl", {flag = "auto_win_brawl"}, function(state)
        getgenv().autoWinBrawl = state
        if state then
            task.spawn(autoWinExample)
        end
    end)

    -- Protección de GUI para evitar que el juego la borre
    if syn and syn.protect_gui and window.ScreenGui then
        pcall(function()
            syn.protect_gui(window.ScreenGui)
        end)
    end
end

-- Crear UI al inicio
createUI()

-- Watcher para recrear la UI si la destruyen
task.spawn(function()
    while true do
        task.wait(3)
        if not window or not (window.ScreenGui and window.ScreenGui.Parent) then
            print("GUI detectada como destruida, recreando UI...")
            createUI()
        end
    end
end)
